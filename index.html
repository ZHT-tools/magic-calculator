<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>魔术计算器 · 炫酷版</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif}
body{
  display:flex;justify-content:center;align-items:center;
  min-height:100vh;
  background:linear-gradient(135deg,#141e30,#243b55);
}
.calculator{
  background:#111;
  padding:30px;
  border-radius:24px;
  box-shadow:0 0 40px rgba(0,255,136,0.2);
  border:1px solid #333;
}
#screen{
  width:100%;
  height:90px;
  background:#1a1a1a;
  color:#0f0;
  font-size:32px;
  text-align:right;
  padding:20px;
  border:none;
  border-radius:14px;
  margin-bottom:20px;
  outline:none;
  transition:all 0.3s;
}
/* 时间结果荧光闪烁特效 */
#screen.magic{
  color:#0f0;
  text-shadow:0 0 10px #0f0,0 0 20px #0f0;
  animation:glow 1s infinite alternate;
}
@keyframes glow{
  from{filter:brightness(1);}
  to{filter:brightness(1.4);}
}
.buttons{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:12px;
}
button{
  height:65px;
  font-size:24px;
  border:none;
  border-radius:12px;
  background:#292929;
  color:white;
  cursor:pointer;
  transition:0.2s;
}
button:hover{
  background:#404040;
  transform:scale(1.05);
}
button:active{
  transform:scale(0.95);
}
.operator{
  background:#ff9f0a;
  color:white;
}
.clear{
  background:#ff3b30;
  color:white;
}
.equal{
  background:#00e676;
  color:white;
  grid-column:span 2;
}
.zero{
  grid-column:span 2;
}
</style>
</head>

<body>
<div class="calculator">
  <input type="text" id="screen" readonly>
  <div class="buttons">
    <button class="clear" onclick="clearScreen()">AC</button>
    <button onclick="append('/')">/</button>
    <button onclick="append('*')">×</button>
    <button class="operator" onclick="append('-')">-</button>

    <button onclick="append('7')">7</button>
    <button onclick="append('8')">8</button>
    <button onclick="append('9')">9</button>
    <button class="operator" onclick="append('+')">+</button>

    <button onclick="append('4')">4</button>
    <button onclick="append('5')">5</button>
    <button onclick="append('6')">6</button>
    <button onclick="append('.')">.</button>

    <button onclick="append('1')">1</button>
    <button onclick="append('2')">2</button>
    <button onclick="append('3')">3</button>
    <button class="equal" onclick="calculate()">=</button>

    <button class="zero" onclick="append('0')">0</button>
  </div>
</div>

<script>
let display = document.getElementById('screen');
let current = '';
let hasCalculatedSum = false;

function append(v) {
  current += v;
  display.value = current;
  display.classList.remove('magic');
}

function clearScreen() {
  current = '';
  hasCalculatedSum = false;
  display.value = '';
  display.classList.remove('magic');
}

function calculate() {
  try {
    if (!hasCalculatedSum) {
      let res = eval(current.replace(/×/g, '*'));
      display.value = res;
      current = res + '';
      hasCalculatedSum = true;
      display.classList.remove('magic');
    } else {
      let now = new Date();
      let y = now.getFullYear();
      let m = (now.getMonth()+1).toString().padStart(2,'0');
      let d = now.getDate().toString().padStart(2,'0');
      let h = now.getHours().toString().padStart(2,'0');
      let min = now.getMinutes().toString().padStart(2,'0');
      display.value = `${y}-${m}-${d} ${h}:${min}`;
      display.classList.add('magic'); // 开启荧光特效
      current = '';
      hasCalculatedSum = false;
    }
  } catch(e) {
    display.value = '错误';
    current = '';
    hasCalculatedSum = false;
    display.classList.remove('magic');
  }
}
</script>
</body>
</html>
